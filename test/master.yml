# A master file that hold a configurations to deploy Cumulus VXLAN EVPN

############# VLANS #############
# Examples:
# # Generate a VLAN network/prefix with a prefixlen of 20
# - id: '500'
#   name: 'vlan500'
#   prefixlen: 20
# # Manually assign a network/prefix
# - id: '501'
#   name: 'vlan501'
#   network_prefix: 10.0.0.0/24
# #
# - id: '502'
#   name: 'vlan502'
vlans:
    tenant01:
      - id: '500'
        name: 'vlan500'
        prefixlen: 20
      - id: '501'
        name: 'vlan500'
        prefixlen: 24


############# MLAG #############
# Define a peerlink interfaces required by mlag.
# The interfaces will be the same for each mlag pair switch
mlag_peerlink_interfaces: 'swp23-24'

# Define a dual-connected server. Switch 'leaf01' and 'leaf02' is a mlag pair named 'rack01' and so on.
# Bond members(slaves) will be the same on each mlag pair switch
mlag_bonds:
    rack01: # leaf01, leaf02
      - name: 'control01'
        members: 'swp1'
        vids: '500-501'
    rack02: # leaf03, leaf04
      - name: 'compute01'
        members: 'swp1'
        vids: '500-501'
    rack03: # leaf05, leaf06
      - name: 'compute02'
        members: 'swp2'
        vids: '500-501'


############# TOPOLOGY LINKS #############
# Define a point-to-point links between switches

network_links:
  - name: fabric
    links:
      - 'spine:swp1 -- leaf:swp21'
      - 'spine:swp23 -- border:swp23'
    interface_type: unnumbered
  - name: external_connectivity
    links:
      - 'edge:eth0 -- border:swp1'
    interface_type: sub_interface

############# BASE NETWORKS ###############
# Change according to your topology
# loopbacks: # use to generete loopback ip of the device.
#   "name_of_ansible_group": "network/prefix"
# vxlan_anycast: # use to generate vtep address in mlag(active-active) deployments.
# vlans: use to generate vlans subnet if 'subnet' attribute is not defined in 'vlans' variables.
# external_connectivity: use to generate point-to-point network /30 prefix, typically between router and edge device.
base_networks:
  loopbacks:
      spine: '192.168.0.0/25'
      edge: '192.168.0.128/25'
      border: '192.168.1.0/24'
      leaf: '192.168.2.0/23'
  vxlan_anycast: '192.168.8.0/23'
  vlans: '172.16.0.0/14'
  external_connectivity: '192.168.254.0/23'

############# BASE BGP AS #############
# Change according to your topology
# "name_of_ansible_group": "base_private_asn"
base_asn:
  spine: 64512
  edge: 64530
  border: 64550
  leaf: 64580

############# STATIC INTERFACES #############
ip_interfaces:
    edge01:
      eth3:
          address: dhcp
          desc: OUTSIDE
      eth2: # Management interface
          address: '172.24.0.254/24'
          desc: INSIDE

############# OUT-OF-BAND MANAGEMENT #############
domain: 'cumulusvxgns3.lab'
dhcp_range: 172.24.0.50,172.24.0.200
gateway_address: '172.24.0.254'
dns_server: '172.24.0.10'
dns_forwarder: '8.8.8.8'
